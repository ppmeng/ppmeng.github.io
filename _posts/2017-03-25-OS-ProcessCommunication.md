---
title: "进程通信以及常见的应用场景"
categories: "操作系统"
tags: ["OS", "进程通信"]
---

用户提交的任务都是通过一个一个进程来完成的，由于进程拥有自己独立的地址空间，所以进程间通信需要特殊的方法来进行。比如，同一个计算机内的进程处于同一个软件和硬件环境下，利用操作系统提供的编程接口，用户可以很方便的实现进程间通信；而不同计算机的应用进程间想要通信来实现数据共享和信息交换，就只能通过网络协议才能实现了。下面是常见的几种进程通信机制：

## 信号通信机制

1. 特点：只能发送单个信号而不能传送数据
2. 信号机制是UNIX为**处理进程中断**设计的，通过发送指定信号来通知进程某个异步事件的发生，以迫使进程执行信号处理程序。换言之，这个通信机制就相当于只能由一方发出某个命令让另一方按照约定去做相应的操作，至于另一方做了没做怎么做发出方并不关心。信号本质是一组预定义的值(比如SIGIN是与终端交互相关的信号，代表键盘中断等等),是一种“软中断”，
3. 应用场景：进程执行非法指令或段违例，发生浮点错，某些按键（ctrl+c）

## 管道通信机制

1. 特点：官道实质是一个连接读写进程的共享文件，但是是单向的
2. 管道分为有名管道和无名管道。
- **无名管道**实际上是内存的一个临时存储区，由系统安全控制并独立于创建他的进程的内存区，读写进程就是通过这个存储区来进行数据交流的。管道对于数据采取先进后出的方式管理，只能读一次不能搜索，两个进程必须拥有共同的祖先，具体是通过管道的inode节点的特征位互斥标志实现读写不能同时发生；其次，必须确定两方都存在的时候才能进行读写操作；管道大小有限，需要传输的数据太大的时候需要进行切分，否则会引起管道溢出而阻塞write，反之，管道内是空的时候读进程会出现read阻塞直到被唤醒。
- **有名管道**解决了无名管道只能连接两个具有共同祖先的进程的问题，有名管道类似于一般文件，具有文件名，进程就像调用一般文件一样进行系统调用open打开管道并通过read和write来读写管道内数据
3. 应用场景：linux shell中比如：ls | grep...,就是将ls的结果通过管道传递给进行grep的进程

## 消息队列通信机制
1. 特点：消息队列是一个消息的链表，一个保存在内核的消息的列表，用户进程可以向消息队列添加消息也可以读取消息。
2. 消息队列和管道相比，优势是可以对每个消息指定特定的消息类型且接收的时候不需要按照队列次序，而是可以根据自定义条件接受特定类型的消息。消息队列通过函数msget创建消息队列，调用msgsnd函数把输入的字符串添加到消息队列中，然后调用msgrcv函数读取消息队列中的消息，最后调用msgctl删除系统内核中的消息队列
3. 应用场景：异步通信，browser-server架构，数据上报模型


## 共享内存通信机制

1. 特点： 类似管道，在内存中开辟一个公共存储区，最大的特点是可由多个独立进程共享效率比较高，常常和其他通信机制比如信号配合使用无需复制，快捷，信息量大
2. 要通信的进程将自己的虚地址空间映射到共享主存区，发送进程将信息写入共享主存后接受进程可以从此位置读取信息（一般与其他通信方式同时使用，共享内存用于共享数据，另一个通信机制用于通知）。需要注意的是共享主存的页面在每一个共享进程的页表中都有页表项引用，共享内存的代码段通常被认为是临界区，一般都会通过信号量或者锁来实现同步
3. 应用场景：多进程模型下大量数据的共享

## 信号量通信机制
1. 特点：操作系统提供实现机制和编程接口，由用户在程序中实现，保证进程间可以进行快速的信息交换和大量数据的共享。但是，上述方式主要适合在同一台计算机系统内部的进程之间的通信
2. 在UNIX中，信号灯是一组进程共享的数据结构，当几个进程竞争同一资源时（文件、共享内存或消息队列等），它们的操作便由信号灯来同步，以防止互相干扰。信号灯保证了某一时刻只有一个进程访问某一临界资源，所有请求该资源的其它进程都将被挂起，一旦该资源得到释放，系统才允许其它进程访问该资源。信号灯通常配对使用，以便实现资源的加锁和解锁。
3. 使用外设的时候


## 网络进程间通信